<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Document</title>
</head>
<body>
	<script type="text/javascript">
		//函数自执行后返回一个函数
		var createPerson = (function () {
			function Person () {
				this.name = "";
			}
			//创建一个Person实例
			var instance = new Person();
			console.log("这里只执行了一次");
			
			return function (name) {
				instance.name = name;
				return instance;
			}
		})();
		
		//一个函数，之后new的createPerson就是执行这部分代码
		console.log(createPerson);
		
		var p1 = new createPerson("乾隆");
		var p2 = new createPerson("康熙");
		
		console.log(p1 == p2);		//true	说明是同一个对象
		console.log(p1.name);		//康熙	p1的name属性被覆盖
	</script>
</body>
</html>